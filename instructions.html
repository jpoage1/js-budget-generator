<html>
<head>
    <title>Budget and Goal Generator</title>
    <link rel="stylesheet" type="text/css" href="reset.css" />
    <link rel="stylesheet" type="text/css" href="google-fonts.css" />
    <script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
    <script type="text/javascript">
    <!--
        function repeat(n, action) {
            let accumular = '';
            for (let i = 0; i < n; i++) {
                accumular+= action(i);
            }
            return accumular;
        }
        function lesserValue(x, y, z) {
            const i = x.indexOf(y);
            const j = x.indexOf(z);
            return i === -1
            ? ( j === -1 ? -1 : z )
            : ( j === -1 ? y : 
                i < j ? y : z
            )
        }
        function locateFirst(...needle) {
            return function(x) {
                return needle.reduce( (y, z) => {
                    return lesserValue(x, y, z);
                });
            }
        }
        function changeLineBuffer(n) {
            return {
                '{': 1,
                '[': 1,
                '}': -1,
                ']': -1,
                '-1': 0,
            }[n]
        }
        function removeComments(id) {
            let n = 0;
            container = document.getElementById(id).innerHTML
            .split('\n')
            .map(line => line.trim())
            .filter(line => line.indexOf('//') !== 0)
            .map(line => {
                let location = 0;
                let i = 0;
                let openNest, closeNest, first, cbl;
                let nextPart = line;
                let again = false;
                let before = true;
                let lb = 0;
                while ( location !== -1 ) {
                    first = locateFirst('{','}','[',']')(nextPart);
                    location = nextPart.indexOf(first);
                    nextPart = nextPart.substr(location, nextPart.length-1);
                    before = before ? i === 0 : false;
                    cbl = changeLineBuffer(first);
                    lb = lb === 0 ? cbl : lb;
                    n = again !== undefined && first !== again ? cbl+n : n;
                    again = first;
                    i = 1
                    if ( location === -1 ) {
                        break;
                    }
                }
                const j = before || lb < 0 ? n : n-1;
                linePrefix = repeat(j, _ => '    ');
                return linePrefix + line;
            } )
            .join('\n');
            document.getElementById(id).innerHTML = container    
        }
    //-->
    </script>
    <style type="text/css">
    <!--
        html, body {
            margin: 0;
            padding: 0;
            position: relative;
            width: 100%;
            height: 100vh;
            font-family: serif;
        }
        #container {
            margin: auto;
            width: 50%;
            border: 3px solid lightseagreen;
            padding: 10px;
        }
        code {
            font-family: monospace;
            font-size: 10pt;
            margin: auto;
            display: block;
            overflow: auto;
            border: 1px solid #ddd;
            background: #eee;
            max-height: 400px;
            margin: 5px 0px 0px 0px;
            padding: 10px 0px 8px 10px;
        }
        ol {
            list-style-type: katakana;
            margin: 0px;
            padding: 0px 25px 0px 25px
        }
        ol li {
            margin: 0px 0px 25px 0px;
            padding: 0px 5px 0px 0px;
            font-size: 12pt;
        }
        ul {
            width: 90%;
            padding: 0px 5px 0px 25px;
            margin: 0;
        }
        ul li {
            padding: 0px 0px 0px 0px;
            margin: 10px 0px 0px 5px;
        }
        .sans-serif {
            font-family: sans-serif;
        }
        b {
            font-weight: bold;
            font-size: 12pt;
        }
        h1 {
            font-size: 16pt;
            margin: 5px 5px 20px 10px;
        }
        h2 {
            font-size: 14pt;
            margin: 5px 5px 20px 10px;
        }
        p.copy-button {
            margin: auto;
            text-align: center;
        }
    -->
    </style>
</head>
<body>
    <div id="container">
    <h1>Budget and Goal Generator</h1>
    <h2>Instructions:</h2>
    <ol>
        <li><span class="sans-serif">NOTE: THIS IS SAMPLE DATA AND IS MEANT FOR YOU TO PLAY AROUND WITH</span></li>

        <li>Get Postman, if you don' already have it here: <a href="https://www.getpostman.com/downloads/">https://www.getpostman.com/downloads/</a></li>

        <li>Open up Postman</li>


        <li>Take note of the number assigned to each role:
        <code>{
            "manager": "1",
            "developer": "2",
            "salesAnalyst": "3",
        }</code></li>

        <li>Send the following data as a POST request to:
        <u>http://jasonpoage.com:5000/stats</u></li>

        <li><b>NOTE:</b>
            <ul>
                <li>THIS IS SAMPLE DATA AND IS MEANT FOR YOU TO PLAY AROUND WITH</li>
                <li>RESULTS FROM THE SAMPLE DATA MAY NOT RESEMBLE ACTUAL DATA UNTIL YOU CUSTOMIZE IT
                    <li>ALSO, Since the data was programmed using javascript objects and not JSON,
                        you may experience unexpected behavior.</li>
                    <li>Although I have made an effort to make this work as expected with JSON,</li>
                    <li>Since I anticipate migrating to a database, it doesn't make sense to work out
                     every single JSON-related kink.</li>
            </ul>
        </li>

        <li>!!!Be sure to remove the comments!!!</l>
    </ol>

    <p class="button-container">
        <button onclick="removeComments('copy-target')">Remove Comments</button>
        <button class="copy-button" data-clipboard-action="copy" data-clipboard-target="#copy-target">Select &amp; Copy</button>
    </p>
    <script type="text/javascript">
    <!--
        var clipboard = new ClipboardJS('button.copy-button');
    //-->
    </script>
    <code id="copy-target" contenteditable="true">
    <pre>
{
    "config": [
        {
            "averageDeal": "3500",
            // Dollars Per Hour
            "productRate": "150",
            // Rate of conversion in decimal format
            "prospectToLead": ".10",
            "leadToQualified": ".10",
            "qualifiedToSale": ".10"
        }
    ],
    "staff": [
        {
            "id": "1",
            "name": "",
            "team": "",
            "role": "1",
            // In Weeks
            "vacation": "4",
            // Dollars Per Hour 
            "rate": "50",
            "hours": "40"
        },
        {
            "id": "2",
            "name": "",
            // Team number is the product manager's id
            "team": "1",
            "role": "2",
            "vacation": "4",
            "rate": "50",
            "hours": "40"
        },
        {
            "id": "3",
            "name": "",
            "team": "1",
            "role": "2",
            "vacation": "4",
            "rate": "50",
            "hours": "40"
        },
        {
            "id": "4",
            "name": "Jason",
            "team": "1",
            "role": "3",
            "vacation": "4",
            "rate": ".15",
            "hours": "40"
        }
    ]
}
</pre></code>
</div>